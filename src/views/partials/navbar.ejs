<%
    const linkBase = "text-text-secondary text-base py-2 px-3 rounded-sm md:p-0 flex items-center";
    const active = "bg-navbar-menu-selected md:bg-transparent text-[#cbd5e1] md:text-text-title";
    const inactive = "md:hover:text-text-title hover:bg-navbar-menu-hover md:hover:bg-transparent";
%>

<nav class="bg-navbar py-3 px-3 border-b-2 border-b-border sticky top-0 z-50 shadow-md select-none">
    <div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto">

        <!-- Logo and Title -->
        <div class="flex items-center space-x-4">
            <svg id="1mcloud-icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" style="width: 50px; height: 50px; margin-right: 10px;">
                <path fill="var(--logo-ring)" d="M512,95A417.14,417.14,0,0,1,674.29,896.27,417.14,417.14,0,0,1,349.71,127.73,414.29,414.29,0,0,1,512,95m0-95C229.23,0,0,229.23,0,512s229.23,512,512,512,512-229.23,512-512S794.77,0,512,0Z" />
                <polygon fill="var(--logo-inner)" points="278.19 279.12 204.29 369.27 204.29 416.09 254.9 416.09 254.9 745.08 362.99 745.08 362.99 279.12 278.19 279.12" />
                <path fill="var(--logo-inner)" d="M819.7,443.62c-.9-90.84-75.12-164.24-166.74-164.69a166,166,0,0,0-115.89,47.65,175.87,175.87,0,0,0-119.31-47.64l-1.06,0a116.39,116.39,0,0,0-34.61,5.28V397.11h0a52.2,52.2,0,0,1,38-16.73,64.38,64.38,0,0,1,16.37,2.31A62.84,62.84,0,0,1,469,404.09l.16.2a52.23,52.23,0,0,1,10.93,32.34V745H588.19V442.25a58,58,0,0,1,12.92-36.44,64.34,64.34,0,0,1,99.42,0l.16.19a51.38,51.38,0,0,1,10.94,32V745H819.71V443.62Z" />
            </svg>
            <h1 class="font-bold"> <%= currentPage %> </h1>
        </div>

        <!-- Mobile Menu Button -->
        <button id="menu-toggle" type="button"
            class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm rounded-lg md:hidden hover:bg-navbar-menu-hover text-text-muted">
            <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 17 14">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M1 1h15M1 7h15M1 13h15"/>
            </svg>
        </button>

        <!-- Menu Items -->
        <div id="navbar"
            class="w-full md:w-auto max-h-0 md:max-h-none overflow-hidden navbar-transition">
            <ul class="font-medium flex flex-col p-4 md:p-0 mt-4 rounded-lg 
               md:flex-row md:space-x-8 rtl:space-x-reverse md:mt-0 
               bg-navbar-menu md:bg-transparent">
                <li>
                    <a href="/" class="<%= linkBase %> <%= currentPage === 'Home' ? active : inactive %>">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"
                            class="fill-current h-7 w-7 flex-shrink-0 mr-2">
                            <path d="M341.8 72.6C329.5 61.2 310.5 61.2 298.3 72.6L74.3 280.6C64.7 289.6 61.5 303.5 66.3 315.7C71.1 327.9 82.8 336 96 336L112 336L112 512C112 547.3 140.7 576 176 576L464 576C499.3 576 528 547.3 528 512L528 336L544 336C557.2 336 569 327.9 573.8 315.7C578.6 303.5 575.4 289.5 565.8 280.6L341.8 72.6zM304 384L336 384C362.5 384 384 405.5 384 432L384 528L256 528L256 432C256 405.5 277.5 384 304 384z"/>
                        </svg>
                        Home
                    </a>
                </li>
                <li>
                    <a href="/proxyChecker" class="<%= linkBase %> <%= currentPage === 'Proxy Checker' ? active : inactive %>">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"
                            class="fill-current h-7 w-7 flex-shrink-0 mr-2">
                            <path d="M320 576C178.6 576 64 461.4 64 320C64 178.6 178.6 64 320 64C461.4 64 576 178.6 576 320C576 461.4 461.4 576 320 576zM438 209.7C427.3 201.9 412.3 204.3 404.5 215L285.1 379.2L233 327.1C223.6 317.7 208.4 317.7 199.1 327.1C189.8 336.5 189.7 351.7 199.1 361L271.1 433C276.1 438 282.9 440.5 289.9 440C296.9 439.5 303.3 435.9 307.4 430.2L443.3 243.2C451.1 232.5 448.7 217.5 438 209.7z"/>
                        </svg>
                        Proxy Checker
                    </a>
                </li>
                <li>
                    <a href="/proxyManager" class="<%= linkBase %> <%= currentPage === 'Proxy Manager' ? active : inactive %>">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"
                            class="fill-current h-7 w-7 flex-shrink-0 mr-2">
                            <path d="M160 96C124.7 96 96 124.7 96 160L96 224C96 259.3 124.7 288 160 288L480 288C515.3 288 544 259.3 544 224L544 160C544 124.7 515.3 96 480 96L160 96zM376 168C389.3 168 400 178.7 400 192C400 205.3 389.3 216 376 216C362.7 216 352 205.3 352 192C352 178.7 362.7 168 376 168zM432 192C432 178.7 442.7 168 456 168C469.3 168 480 178.7 480 192C480 205.3 469.3 216 456 216C442.7 216 432 205.3 432 192zM160 352C124.7 352 96 380.7 96 416L96 480C96 515.3 124.7 544 160 544L480 544C515.3 544 544 515.3 544 480L544 416C544 380.7 515.3 352 480 352L160 352zM376 424C389.3 424 400 434.7 400 448C400 461.3 389.3 472 376 472C362.7 472 352 461.3 352 448C352 434.7 362.7 424 376 424zM432 448C432 434.7 442.7 424 456 424C469.3 424 480 434.7 480 448C480 461.3 469.3 472 456 472C442.7 472 432 461.3 432 448z"/>
                        </svg>
                        Proxy Manager
                    </a>
                </li>
                <li class="self-end mt-4 md:mt-0">
                    <!-- Theme Toggle Button -->
                    <%- include('themeToggle') %>
                </li>
            </ul>
        </div>
    </div>
</nav>

<script>
    document.getElementById('menu-toggle').addEventListener('click', function () {
        const navbar = document.getElementById('navbar');
        navbar.classList.toggle('max-h-0');
        navbar.classList.toggle('max-h-[500px]'); // adjust if menu taller
    });
</script>
