<%
    const linkBase = "text-text-secondary text-base py-2 px-3 rounded-sm md:p-0 flex items-center";
    const active = "bg-navbar-menu-selected md:bg-transparent text-[#cbd5e1] md:text-text-title";
    const inactive = "md:hover:text-text-title hover:bg-navbar-menu-hover md:hover:bg-transparent";
%>

<nav class="bg-navbar py-3 px-3 border-b-2 border-b-border sticky top-0 z-50 shadow-md select-none">
    <div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto">

        <!-- Logo and Title -->
        <div class="flex items-center space-x-4">
            <svg id="1mcloud-icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" style="width: 50px; height: 50px; margin-right: 10px;">
                <path fill="var(--logo-ring)" d="M512,95A417.14,417.14,0,0,1,674.29,896.27,417.14,417.14,0,0,1,349.71,127.73,414.29,414.29,0,0,1,512,95m0-95C229.23,0,0,229.23,0,512s229.23,512,512,512,512-229.23,512-512S794.77,0,512,0Z" />
                <polygon fill="var(--logo-inner)" points="278.19 279.12 204.29 369.27 204.29 416.09 254.9 416.09 254.9 745.08 362.99 745.08 362.99 279.12 278.19 279.12" />
                <path fill="var(--logo-inner)" d="M819.7,443.62c-.9-90.84-75.12-164.24-166.74-164.69a166,166,0,0,0-115.89,47.65,175.87,175.87,0,0,0-119.31-47.64l-1.06,0a116.39,116.39,0,0,0-34.61,5.28V397.11h0a52.2,52.2,0,0,1,38-16.73,64.38,64.38,0,0,1,16.37,2.31A62.84,62.84,0,0,1,469,404.09l.16.2a52.23,52.23,0,0,1,10.93,32.34V745H588.19V442.25a58,58,0,0,1,12.92-36.44,64.34,64.34,0,0,1,99.42,0l.16.19a51.38,51.38,0,0,1,10.94,32V745H819.71V443.62Z" />
            </svg>
            <h1 class="font-bold"> <%= currentPage %> </h1>
        </div>

        <!-- Mobile Menu Button -->
        <button id="menu-toggle" type="button"
            class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm rounded-lg md:hidden hover:bg-navbar-menu-hover text-text-muted">
            <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 17 14">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M1 1h15M1 7h15M1 13h15"/>
            </svg>
        </button>

        <!-- Menu Items -->
        <div id="navbar"
            class="w-full md:w-auto max-h-0 md:max-h-none overflow-hidden navbar-transition">
            <ul class="font-medium flex flex-col p-4 md:p-0 mt-4 rounded-lg 
               md:flex-row md:space-x-8 rtl:space-x-reverse md:mt-0 
               bg-navbar-menu md:bg-transparent">
                <li>
                    <a href="https://1mcloud.vn" target="_blank" class="<%= linkBase %> <%= currentPage === 'Home' ? active : inactive %>">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"
                            class="fill-current h-7 w-7 flex-shrink-0 mr-2">
                            <path d="M341.8 72.6C329.5 61.2 310.5 61.2 298.3 72.6L74.3 280.6C64.7 289.6 61.5 303.5 66.3 315.7C71.1 327.9 82.8 336 96 336L112 336L112 512C112 547.3 140.7 576 176 576L464 576C499.3 576 528 547.3 528 512L528 336L544 336C557.2 336 569 327.9 573.8 315.7C578.6 303.5 575.4 289.5 565.8 280.6L341.8 72.6zM304 384L336 384C362.5 384 384 405.5 384 432L384 528L256 528L256 432C256 405.5 277.5 384 304 384z"/>
                        </svg>
                        Home
                    </a>
                </li>
                <li>
                    <a href="/proxyChecker" class="<%= linkBase %> <%= currentPage === 'Proxy Checker' ? active : inactive %>">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"
                            class="fill-current h-7 w-7 flex-shrink-0 mr-2">
                            <path d="M320 576C178.6 576 64 461.4 64 320C64 178.6 178.6 64 320 64C461.4 64 576 178.6 576 320C576 461.4 461.4 576 320 576zM438 209.7C427.3 201.9 412.3 204.3 404.5 215L285.1 379.2L233 327.1C223.6 317.7 208.4 317.7 199.1 327.1C189.8 336.5 189.7 351.7 199.1 361L271.1 433C276.1 438 282.9 440.5 289.9 440C296.9 439.5 303.3 435.9 307.4 430.2L443.3 243.2C451.1 232.5 448.7 217.5 438 209.7z"/>
                        </svg>
                        Proxy Checker
                    </a>
                </li>
                <li>
                    <a href="/proxyManager" class="<%= linkBase %> <%= currentPage === 'Proxy Manager' ? active : inactive %>">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                            class="fill-current h-7 w-7 flex-shrink-0 mr-2">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M22 18.2105C22 17.8399 21.6876 17.5395 21.3023 17.5395H13.7252C13.5364 17.0909 13.164 16.7327 12.6977 16.5511V13.7368H18.5116C20.0529 13.7368 21.3023 12.5351 21.3023 11.0526C21.3023 9.57018 20.0529 8.36842 18.5116 8.36842C20.0529 8.36842 21.3023 7.16666 21.3023 5.68421C21.3023 4.20176 20.0529 3 18.5116 3H5.48837C3.94711 3 2.69767 4.20176 2.69767 5.68421C2.69767 7.16666 3.94711 8.36842 5.48837 8.36842C3.94711 8.36842 2.69767 9.57018 2.69767 11.0526C2.69767 12.5351 3.94711 13.7368 5.48837 13.7368H11.3023V16.5511C10.836 16.7327 10.4636 17.0909 10.2748 17.5395H2.69767C2.31236 17.5395 2 17.8399 2 18.2105C2 18.5811 2.31236 18.8816 2.69767 18.8816H10.2748C10.5508 19.5374 11.2192 20 12 20C12.7808 20 13.4492 19.5374 13.7252 18.8816H21.3023C21.6876 18.8816 22 18.5811 22 18.2105ZM12.2326 5.68421C12.2326 5.3136 12.5449 5.01316 12.9302 5.01316H18.5116C18.8969 5.01316 19.2093 5.3136 19.2093 5.68421C19.2093 6.05482 18.8969 6.35526 18.5116 6.35526H12.9302C12.5449 6.35526 12.2326 6.05482 12.2326 5.68421ZM12.2326 11.0526C12.2326 10.682 12.5449 10.3816 12.9302 10.3816H18.5116C18.8969 10.3816 19.2093 10.682 19.2093 11.0526C19.2093 11.4232 18.8969 11.7237 18.5116 11.7237H12.9302C12.5449 11.7237 12.2326 11.4232 12.2326 11.0526ZM6.4186 6.57895C6.93236 6.57895 7.34884 6.17836 7.34884 5.68421C7.34884 5.19006 6.93236 4.78947 6.4186 4.78947C5.90485 4.78947 5.48837 5.19006 5.48837 5.68421C5.48837 6.17836 5.90485 6.57895 6.4186 6.57895ZM6.4186 11.9474C6.93236 11.9474 7.34884 11.5468 7.34884 11.0526C7.34884 10.5585 6.93236 10.1579 6.4186 10.1579C5.90485 10.1579 5.48837 10.5585 5.48837 11.0526C5.48837 11.5468 5.90485 11.9474 6.4186 11.9474Z"/>
                        </svg>
                        Proxy Manager
                    </a>
                </li>
                <li class="self-end mt-4 md:mt-0">
                    <!-- Theme Toggle Button -->
                    <%- include('themeToggle') %>
                </li>
            </ul>
        </div>
    </div>
</nav>

<script>
    document.getElementById('menu-toggle').addEventListener('click', function () {
        const navbar = document.getElementById('navbar');
        navbar.classList.toggle('max-h-0');
        navbar.classList.toggle('max-h-[500px]'); // adjust if menu taller
    });
</script>
