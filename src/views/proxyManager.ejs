<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>IP Management</title>
	<link rel="stylesheet" href="css/style.css" />
</head>

<body class="bg-body text-text-primary font-sans text-xs sm:text-lg">

	<!-- Navbar -->
	<%- include('partials/navbar', { currentPage: 'Proxy Manager' }) %>

		<!-- Main Container -->
		<div class="flex min-h-screen flex-col">
			<!-- ========== TOP CONTROLS ========== -->
			<div class="bg-surface border-border z-40 border-b select-none">
				<div class="mx-auto max-w-7xl px-4 py-4">
					<!-- ========== FEATURE CONTROLS ========== -->
					<div class="bg-wrapper rounded-lg p-4">
						<h3 class="text-text-secondary mb-3 flex items-center text-lg font-bold sm:text-2xl">
							<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"
								class="mr-2 h-6 w-6 flex-shrink-0 fill-current sm:h-7 sm:w-7">
								<path d="M415.9 274.5C428.1 271.2 440.9 277 446.4 288.3L465 325.9C475.3 327.3 485.4 330.1 494.9 334L529.9 310.7C540.4 303.7 554.3 305.1 563.2 314L582.4 333.2C591.3 342.1 592.7 356.1 585.7 366.5L562.4 401.4C564.3 406.1 566 411 567.4 416.1C568.8 421.2 569.7 426.2 570.4 431.3L608.1 449.9C619.4 455.5 625.2 468.3 621.9 480.4L614.9 506.6C611.6 518.7 600.3 526.9 587.7 526.1L545.7 523.4C539.4 531.5 532.1 539 523.8 545.4L526.5 587.3C527.3 599.9 519.1 611.3 507 614.5L480.8 621.5C468.6 624.8 455.9 619 450.3 607.7L431.7 570.1C421.4 568.7 411.3 565.9 401.8 562L366.8 585.3C356.3 592.3 342.4 590.9 333.5 582L314.3 562.8C305.4 553.9 304 540 311 529.5L334.3 494.5C332.4 489.8 330.7 484.9 329.3 479.8C327.9 474.7 327 469.6 326.3 464.6L288.6 446C277.3 440.4 271.6 427.6 274.8 415.5L281.8 389.3C285.1 377.2 296.4 369 309 369.8L350.9 372.5C357.2 364.4 364.5 356.9 372.8 350.5L370.1 308.7C369.3 296.1 377.5 284.7 389.6 281.5L415.8 274.5zM448.4 404C424.1 404 404.4 423.7 404.5 448.1C404.5 472.4 424.2 492 448.5 492C472.8 492 492.5 472.3 492.5 448C492.4 423.6 472.7 404 448.4 404zM224.9 18.5L251.1 25.5C263.2 28.8 271.4 40.2 270.6 52.7L267.9 94.5C276.2 100.9 283.5 108.3 289.8 116.5L331.8 113.8C344.3 113 355.7 121.2 359 133.3L366 159.5C369.2 171.6 363.5 184.4 352.2 190L314.5 208.6C313.8 213.7 312.8 218.8 311.5 223.8C310.2 228.8 308.4 233.8 306.5 238.5L329.8 273.5C336.8 284 335.4 297.9 326.5 306.8L307.3 326C298.4 334.9 284.5 336.3 274 329.3L239 306C229.5 309.9 219.4 312.7 209.1 314.1L190.5 351.7C184.9 363 172.1 368.7 160 365.5L133.8 358.5C121.6 355.2 113.5 343.8 114.3 331.3L117 289.4C108.7 283 101.4 275.6 95.1 267.4L53.1 270.1C40.6 270.9 29.2 262.7 25.9 250.6L18.9 224.4C15.7 212.3 21.4 199.5 32.7 193.9L70.4 175.3C71.1 170.2 72.1 165.2 73.4 160.1C74.8 155 76.4 150.1 78.4 145.4L55.1 110.5C48.1 100 49.5 86.1 58.4 77.2L77.6 58C86.5 49.1 100.4 47.7 110.9 54.7L145.9 78C155.4 74.1 165.5 71.3 175.8 69.9L194.4 32.3C200 21 212.7 15.3 224.9 18.5zM192.4 148C168.1 148 148.4 167.7 148.4 192C148.4 216.3 168.1 236 192.4 236C216.7 236 236.4 216.3 236.4 192C236.4 167.7 216.7 148 192.4 148z" />
							</svg>
							Actions
						</h3>
						<div class="flex flex-col gap-4 sm:flex-row">

							<!-- IPs Input -->
							<div class="relative flex flex-col sm:w-3/5">
								<div class="flex items-center justify-between">
									<label
										class="text-text-secondary flex items-center text-sm font-medium sm:text-base">
										<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
											class="mr-2 h-6 w-6 flex-shrink-0 fill-current sm:h-7 sm:w-7">
											<path d="M5 5a2 2 0 0 0-2 2v3a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1V7a2 2 0 0 0-2-2H5Zm9 2a1 1 0 1 0 0 2h.01a1 1 0 1 0 0-2H14Zm3 0a1 1 0 1 0 0 2h.01a1 1 0 1 0 0-2H17ZM3 17v-3a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2Zm11-2a1 1 0 1 0 0 2h.01a1 1 0 1 0 0-2H14Zm3 0a1 1 0 1 0 0 2h.01a1 1 0 1 0 0-2H17Z" />
										</svg>
										<label class="flex flex-wrap">
											<span class="whitespace-pre">Enter IPs </span>
											<span>(one per line)</span>
										</label>
									</label>
									<button id="deleteBtn"
										class="static md:absolute lg:static right-0 bottom-[-8px] text-nowrap bg-bg-pause hover:brightness-[var(--highlight-brightness)] font-medium mb-2 py-1 px-3 rounded-lg transition-colors duration-200 text-sm flex items-center justify-center">
										<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"
											class="mr-1 h-5 w-5 flex-shrink-0 fill-current">
											<path d="M232.7 69.9L224 96L128 96C110.3 96 96 110.3 96 128C96 145.7 110.3 160 128 160L512 160C529.7 160 544 145.7 544 128C544 110.3 529.7 96 512 96L416 96L407.3 69.9C402.9 56.8 390.7 48 376.9 48L263.1 48C249.3 48 237.1 56.8 232.7 69.9zM512 208L128 208L149.1 531.1C150.7 556.4 171.7 576 197 576L443 576C468.3 576 489.3 556.4 490.9 531.1L512 208z" />
										</svg>
										Delete
									</button>
								</div>
								<textarea id="ip-list" class="min-h-[6rem] flex-grow"
									placeholder="192.168.1.1&#10;10.0.0.1&#10;172.16.0.1"></textarea>
							</div>

							<!-- GetData & Change Note & Reinstall and Simple Action Buttons -->
							<div class="flex-col">
								<div class="grid w-full auto-rows-auto grid-cols-[1fr_1fr_1fr] items-start gap-1 p-0">

									<!-- Get Data -->
									<div class="col-start-1 col-end-2 row-start-1 row-end-2 m-1 space-y-1 md:row-end-3">
										<input type="number" id="amount" placeholder="Enter amount" min="0" />
										<div class="flex items-center">
											<button id="getDataBtn"
												class="bg-bg-getData flex flex-1 items-center justify-center rounded-lg px-3 py-2 font-medium hover:brightness-[var(--highlight-brightness)]">
												<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
													class="fill-none mr-1 h-5 w-5 flex-shrink-0 sm:mr-2 sm:h-7 sm:w-7">
													<path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
														d="M12 13V4M7 14H5a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1h-2m-1-5-4 5-4-5m9 8h.01" />
												</svg>
												Get Data
											</button>
										</div>
									</div>

									<!-- Change Note -->
									<div
										class="col-start-2 col-end-4 row-start-1 row-end-2 m-1 flex-1 space-y-1 md:col-end-3 md:row-end-3">
										<input type="text" id="noteInput" placeholder="Enter note" />
										<button id="changeNoteBtn"
											class="bg-bg-changeNote flex w-full items-center justify-center rounded-lg px-3 py-2 font-medium text-nowrap transition-colors duration-200 hover:brightness-[var(--highlight-brightness)]">
											<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"
												class="mr-1 h-5 w-5 flex-shrink-0 fill-current sm:mr-2 sm:h-7 sm:w-7">
												<path d="M535.6 85.7C513.7 63.8 478.3 63.8 456.4 85.7L432 110.1L529.9 208L554.3 183.6C576.2 161.7 576.2 126.3 554.3 104.4L535.6 85.7zM236.4 305.7C230.3 311.8 225.6 319.3 222.9 327.6L193.3 416.4C190.4 425 192.7 434.5 199.1 441C205.5 447.5 215 449.7 223.7 446.8L312.5 417.2C320.7 414.5 328.2 409.8 334.4 403.7L496 241.9L398.1 144L236.4 305.7zM160 128C107 128 64 171 64 224L64 480C64 533 107 576 160 576L416 576C469 576 512 533 512 480L512 384C512 366.3 497.7 352 480 352C462.3 352 448 366.3 448 384L448 480C448 497.7 433.7 512 416 512L160 512C142.3 512 128 497.7 128 480L128 224C128 206.3 142.3 192 160 192L256 192C273.7 192 288 177.7 288 160C288 142.3 273.7 128 256 128L160 128z" />
											</svg>
											Change Note
										</button>
									</div>
									<!-- Reinstall -->
									<div
										class="col-start-1 col-end-3 row-start-2 row-end-3 m-1 space-y-1 self-end md:col-start-3 md:col-end-4 md:row-start-1">
										<input type="text" id="reinstallInput" placeholder="port:username:password" />
										<div class="flex">
											<button id="reinstallBtn"
												class="bg-bg-reinstall flex flex-1 items-center justify-center rounded-l-lg px-3 py-2 font-medium hover:brightness-[var(--highlight-brightness)]">
												<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"
													class="mr-1 h-5 w-5 flex-shrink-0 fill-current sm:mr-2 sm:h-7 sm:w-7">
													<path d="M544.1 256L552 256C565.3 256 576 245.3 576 232L576 88C576 78.3 570.2 69.5 561.2 65.8C552.2 62.1 541.9 64.2 535 71L483.3 122.8C439 86.1 382 64 320 64C191 64 84.3 159.4 66.6 283.5C64.1 301 76.2 317.2 93.7 319.7C111.2 322.2 127.4 310 129.9 292.6C143.2 199.5 223.3 128 320 128C364.4 128 405.2 143 437.7 168.3L391 215C384.1 221.9 382.1 232.2 385.8 241.2C389.5 250.2 398.3 256 408 256L544.1 256zM573.5 356.5C576 339 563.8 322.8 546.4 320.3C529 317.8 512.7 330 510.2 347.4C496.9 440.4 416.8 511.9 320.1 511.9C275.7 511.9 234.9 496.9 202.4 471.6L249 425C255.9 418.1 257.9 407.8 254.2 398.8C250.5 389.8 241.7 384 232 384L88 384C74.7 384 64 394.7 64 408L64 552C64 561.7 69.8 570.5 78.8 574.2C87.8 577.9 98.1 575.8 105 569L156.8 517.2C201 553.9 258 576 320 576C449 576 555.7 480.6 573.4 356.5z" />
												</svg>
												Reinstall
											</button>
											<%- include('partials/dropDown', {
												dropdownId: 'reinstallType',
												dropdownOptions: ['HTTPS', 'SOCKS5' ],
												defaultOption: 'HTTPS'
											}) %>
										</div>
									</div>

									<!-- Change IP -->
									<div class="col-start-1 col-end-3 row-start-3 row-end-4 m-1 mb-0 flex self-start md:col-end-2">
										<button id="changeIpBtn"
											class="bg-bg-changeIp flex w-full items-center justify-center rounded-l-lg px-3 py-2 font-medium text-nowrap transition-colors duration-200 hover:brightness-[var(--highlight-brightness)]">
											<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"
												class="mr-1 h-5 w-5 flex-shrink-0 fill-current sm:mr-2 sm:h-7 sm:w-7">
												<path d="M566.6 214.6L470.6 310.6C461.4 319.8 447.7 322.5 435.7 317.5C423.7 312.5 416 300.9 416 288L416 224L96 224C78.3 224 64 209.7 64 192C64 174.3 78.3 160 96 160L416 160L416 96C416 83.1 423.8 71.4 435.8 66.4C447.8 61.4 461.5 64.2 470.7 73.3L566.7 169.3C579.2 181.8 579.2 202.1 566.7 214.6zM169.3 566.6L73.3 470.6C60.8 458.1 60.8 437.8 73.3 425.3L169.3 329.3C178.5 320.1 192.2 317.4 204.2 322.4C216.2 327.4 224 339.1 224 352L224 416L544 416C561.7 416 576 430.3 576 448C576 465.7 561.7 480 544 480L224 480L224 544C224 556.9 216.2 568.6 204.2 573.6C192.2 578.6 178.5 575.8 169.3 566.7z" />
											</svg>
											Change IP
										</button>
										<%- include('partials/dropDown', {
											dropdownId: 'changeIpType',
											dropdownOptions: ['HTTPS', 'SOCKS5' ],
											defaultOption: 'HTTPS'
										}) %>
									</div>

									<!-- Simple button -->
									<div class="col-start-3 col-end-4 row-start-2 row-end-4 grid flex-1 grid-cols-1 gap-1 md:col-start-2 md:row-start-3 md:grid-cols-3">
										<button id="copyIpBtn"
											class="bg-bg-copyIp m-1 flex items-center justify-center rounded-lg px-3 py-2 font-medium text-nowrap transition-colors duration-200 hover:brightness-[var(--highlight-brightness)]">
											<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"
												class="mr-1 h-5 w-5 flex-shrink-0 fill-current sm:mr-2 sm:h-7 sm:w-7">
												<path d="M288 64C252.7 64 224 92.7 224 128L224 384C224 419.3 252.7 448 288 448L480 448C515.3 448 544 419.3 544 384L544 183.4C544 166 536.9 149.3 524.3 137.2L466.6 81.8C454.7 70.4 438.8 64 422.3 64L288 64zM160 192C124.7 192 96 220.7 96 256L96 512C96 547.3 124.7 576 160 576L352 576C387.3 576 416 547.3 416 512L416 496L352 496L352 512L160 512L160 256L176 256L176 192L160 192z" />
											</svg>
											Copy IP
										</button>
										<button id="rebootBtn"
											class="bg-bg-reboot m-1 flex items-center justify-center rounded-lg px-3 py-2 font-medium hover:brightness-[var(--highlight-brightness)]">
											<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"
												class="mr-1 h-[18px] w-[18px] flex-shrink-0 fill-current sm:mr-2 sm:h-6 sm:w-6">
												<path d="m 8 0 c -0.550781 0 -1 0.449219 -1 1 v 5 c 0 0.550781 0.449219 1 1 1 s 1 -0.449219 1 -1 v -5 c 0 -0.550781 -0.449219 -1 -1 -1 z m -7 1 l 2.050781 2.050781 c -2.117187 2.117188 -2.652343 5.355469 -1.332031 8.039063 c 1.324219 2.683594 4.214844 4.238281 7.179688 3.851562 c 2.96875 -0.386718 5.367187 -2.625 5.960937 -5.554687 c 0.59375 -2.933594 -0.75 -5.929688 -3.335937 -7.433594 c -0.476563 -0.28125 -1.089844 -0.117187 -1.367188 0.359375 s -0.117188 1.089844 0.359375 1.367188 c 1.851563 1.078124 2.808594 3.207031 2.382813 5.3125 c -0.421876 2.101562 -2.128907 3.691406 -4.253907 3.96875 c -2.128906 0.273437 -4.183593 -0.828126 -5.128906 -2.753907 s -0.566406 -4.226562 0.949219 -5.742187 l 1.535156 1.535156 v -4.003906 c 0 -0.519532 -0.449219 -0.996094 -1 -0.996094 z m 0 0" />
											</svg>
											Reboot
										</button>
										<button id="pauseBtn"
											class="bg-bg-pause m-1 flex items-center justify-center rounded-lg px-3 py-2 font-medium hover:brightness-[var(--highlight-brightness)]">
											<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"
												class="mr-1 h-5 w-5 flex-shrink-0 fill-current sm:mr-2 sm:h-6 sm:w-6">
												<path d="M176 96C149.5 96 128 117.5 128 144L128 496C128 522.5 149.5 544 176 544L240 544C266.5 544 288 522.5 288 496L288 144C288 117.5 266.5 96 240 96L176 96zM400 96C373.5 96 352 117.5 352 144L352 496C352 522.5 373.5 544 400 544L464 544C490.5 544 512 522.5 512 496L512 144C512 117.5 490.5 96 464 96L400 96z" />
											</svg>
											Pause
										</button>
									</div>
								</div>
								<div class="flex m-1 mt-2">
									<div class="relative flex-1">
										<input type="password" id="api-key" placeholder="Enter API Key"
											class="rounded-r-none border-r-0" />
										<!-- Eye SVG (Show API key) -->
										<svg id="eyeIconAPIKey" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"
											class="fill-text-muted absolute inset-y-0 right-0 my-auto mr-2 h-7 w-7 cursor-pointer hover:brightness-[var(--highlight-brightness)]">
											<path d="M73 39.1C63.6 29.7 48.4 29.7 39.1 39.1C29.8 48.5 29.7 63.7 39 73.1L567 601.1C576.4 610.5 591.6 610.5 600.9 601.1C610.2 591.7 610.3 576.5 600.9 567.2L504.5 470.8C507.2 468.4 509.9 466 512.5 463.6C559.3 420.1 590.6 368.2 605.5 332.5C608.8 324.6 608.8 315.8 605.5 307.9C590.6 272.2 559.3 220.2 512.5 176.8C465.4 133.1 400.7 96.2 319.9 96.2C263.1 96.2 214.3 114.4 173.9 140.4L73 39.1zM236.5 202.7C260 185.9 288.9 176 320 176C399.5 176 464 240.5 464 320C464 351.1 454.1 379.9 437.3 403.5L402.6 368.8C415.3 347.4 419.6 321.1 412.7 295.1C399 243.9 346.3 213.5 295.1 227.2C286.5 229.5 278.4 232.9 271.1 237.2L236.4 202.5zM357.3 459.1C345.4 462.3 332.9 464 320 464C240.5 464 176 399.5 176 320C176 307.1 177.7 294.6 180.9 282.7L101.4 203.2C68.8 240 46.4 279 34.5 307.7C31.2 315.6 31.2 324.4 34.5 332.3C49.4 368 80.7 420 127.5 463.4C174.6 507.1 239.3 544 320.1 544C357.4 544 391.3 536.1 421.6 523.4L357.4 459.2z" />
										</svg>
									</div>
									<button id="getAPIKeyBtn"
										class="bg-bg-getAPIKey flex items-center justify-center rounded-r-lg px-3 py-2 font-medium text-nowrap transition-colors duration-200 hover:brightness-[var(--highlight-brightness)]">
										<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"
											class="mr-1 h-5 w-5 flex-shrink-0 fill-current sm:mr-2 sm:h-7 sm:w-7">
											<path d="M400 416C497.2 416 576 337.2 576 240C576 142.8 497.2 64 400 64C302.8 64 224 142.8 224 240C224 258.7 226.9 276.8 232.3 293.7L71 455C66.5 459.5 64 465.6 64 472L64 552C64 565.3 74.7 576 88 576L168 576C181.3 576 192 565.3 192 552L192 512L232 512C245.3 512 256 501.3 256 488L256 448L296 448C302.4 448 308.5 445.5 313 441L346.3 407.7C363.2 413.1 381.3 416 400 416zM440 160C462.1 160 480 177.9 480 200C480 222.1 462.1 240 440 240C417.9 240 400 222.1 400 200C400 177.9 417.9 160 440 160z"/>
										</svg>
										Get API Key
									</button>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Scrollable Table Area -->
			<%- include('partials/table', {
				tableTitle: 'Proxy Manager',
				headers: ['sid', 'ip:port', 'country', 'type', 'created', 'expired', 'ip_changed', 'status', 'note'],
				emptyMessage: `
					<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
						class="fill-text-muted mx-auto h-12 w-12 flex-shrink-0 sm:h-16 sm:w-16">
						<path d="M5 5a2 2 0 0 0-2 2v3a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1V7a2 2 0 0 0-2-2H5Zm9 2a1 1 0 1 0 0 2h.01a1 1 0 1 0 0-2H14Zm3 0a1 1 0 1 0 0 2h.01a1 1 0 1 0 0-2H17ZM3 17v-3a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2Zm11-2a1 1 0 1 0 0 2h.01a1 1 0 1 0 0-2H14Zm3 0a1 1 0 1 0 0 2h.01a1 1 0 1 0 0-2H17Z" />
					</svg>
					<p class="text-text-muted text-base select-none sm:text-xl">
						No data available <br />
						Click "Get Data" to load information
					</p>
				`
			}) %>
		</div>

		<%- include('partials/toaster') %>

		<%- include('partials/copyDialog') %>
		
		<%- include('partials/ChangeIpDialog') %>

		<%- include('partials/getAPIKey') %>

		<%- include('partials/footer') %>
		<script type="module" src="javascript/proxyManager.js"></script>
</body>
